<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dashboard â€” Future of Music Mentorship</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css">
</head>

<body>

<script>
/* ================================
   AUTH GUARD
================================ */
const authUser = JSON.parse(localStorage.getItem("authUser"));
if(!authUser){
  window.location.href = "login.html";
}
</script>

<header>
  <h1>Future of Music Mentorship</h1>
  <p style="color:var(--muted)">Youth Creator Launch Portal</p>
  <nav>
    <a href="index.html">Home</a>
    <a href="goals.html">Goals</a>
    <a href="survey.html">Check-In</a>
    <a href="progress.html">Progress</a>
    <a href="#" onclick="logout()">Logout</a>
  </nav>
</header>

<div class="container">

  <!-- USER CARD -->
  <div class="card">
    <div style="display:flex;gap:1.25rem;align-items:center;flex-wrap:wrap">

      <div class="avatar" id="avatar"></div>

      <div>
        <h2 style="margin:.25rem 0" id="name"></h2>
        <div id="roleBadge"></div>
        <div style="margin-top:.5rem;color:var(--muted)">
          Rank: <strong id="rank"></strong>
        </div>
      </div>

    </div>

    <!-- XP / LEVEL -->
    <div style="margin-top:1.5rem">
      <h3>
        Level <span id="level"></span>
      </h3>

      <div class="progress-wrap">
        <div class="progress-bar" id="xpBar"></div>
      </div>

      <p style="font-size:.85rem;color:var(--muted)">
        XP: <span id="xp"></span> / <span id="nextXP"></span>
      </p>
    </div>

    <!-- QUICK ACTIONS -->
    <div style="margin-top:1.75rem;display:flex;gap:1rem;flex-wrap:wrap">
      <a class="btn" href="goals.html">Set Goals</a>
      <a class="btn" href="survey.html">Weekly Check-In</a>
      <a class="btn" href="progress.html">View Progress</a>
    </div>
  </div>

</div>

<!-- FLOATING UI -->
<div id="ui">
  <button onclick="toggleTheme()">ðŸŒ™</button>
  <div class="dot" style="color:#76ADCB" onclick="setAccent('#76ADCB')"></div>
  <div class="dot" style="color:#9B5DE5" onclick="setAccent('#9B5DE5')"></div>
  <div class="dot" style="color:#00F5D4" onclick="setAccent('#00F5D4')"></div>
</div>

<script>
/* ================================
   LOGOUT
================================ */
function logout(){
  localStorage.removeItem("authUser");
  window.location.href = "login.html";
}

/* ================================
   THEME
================================ */
function toggleTheme(){
  document.body.dataset.theme =
    document.body.dataset.theme==="light" ? "" : "light";
  localStorage.theme = document.body.dataset.theme;
}
document.body.dataset.theme = localStorage.theme || "";

/* ================================
   ACCENT COLOR
================================ */
function setAccent(color){
  document.documentElement.style.setProperty("--accent", color);
  document.documentElement.style.setProperty("--glow", color + "88");
  localStorage.accent = color;
}
if(localStorage.accent){
  setAccent(localStorage.accent);
}

/* ================================
   USER DATA
================================ */
const user = authUser;

/* Avatar initial */
document.getElementById("avatar").textContent =
  user.name.charAt(0).toUpperCase();

/* Name */
document.getElementById("name").textContent = user.name;

/* Role badge */
if(user.role === "mentor"){
  document.getElementById("roleBadge").innerHTML =
    '<span class="badge mentor">Mentor Mode</span>';
}

/* ================================
   XP / LEVEL / RANK
================================ */
const xp = user.xp || 0;
const level = Math.floor(xp / 100) + 1;
const currentXP = xp % 100;

const ranks = [
  "New Creator",
  "Rising Artist",
  "Creative Builder",
  "Visionary",
  "Elite Mentor"
];

document.getElementById("level").textContent = level;
document.getElementById("xp").textContent = currentXP;
document.getElementById("nextXP").textContent = 100;
document.getElementById("rank").textContent =
  ranks[Math.min(level - 1, ranks.length - 1)];

/* Animate XP bar */
setTimeout(()=>{
  document.getElementById("xpBar").style.width = currentXP + "%";
},300);
</script>

</body>
</html>
